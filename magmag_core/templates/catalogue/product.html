{% extends 'layout.html' %}
{% load i18n %}

{% block extra %}
    <script src="{{ STATIC_URL }}magmag_core/js/jquery-2.1.0.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="{{ STATIC_URL }}magmag_core/css/flexslider.css" type="text/css" media="screen" />
    <script src="{{ STATIC_URL }}magmag_core/js/jplugins/jquery.flexslider.js" type="text/javascript"></script>
    <script type="text/javascript">

    $(document).ready(function (){
        $('.product-size-list li div').click(function(e){
            var inputid = this.id.replace('alt-','#');
            $(inputid).prop("checked","true");
        });
    })
    </script>

{% endblock %}

{% block content_wrapper %}
<aside class="image-galery">
    {% if product.images.all|length > 1 %}
        <div id="product_slides_{{product.id  }}" class="flexslider">
                    <ul class="slides">
                    {% for img in product.images.all %}
                        <li data-thumb="{{ img.thumbnail.url }}">
                            {% if img.preview %}
                                    <img src="{{ img.preview.url }}" >
                                    {% if img.caption %}
                                        <div class="flex-caption">{{ img.caption }}</div>
                                    {% endif %}
                            {% elif img.original %}
                                <div><img src="{{ img.original.url }}"/></div>
                            {% endif %}
                        </li>
                    {% endfor %}
                    </ul>
                </div>
                <script>
                    $(window).load(function() {
                        $('.flexslider').flexslider({animation: "slide",smoothHeight: true, slideshow: false, controlNav: "thumbnails"});
                    });
                </script>
    {% endif %}
</aside>
<section class="product-details">
    <h1 class="product-name">{{ product.name }}</h1>
    <p>{{ product.description }}</p>
    <div>{% trans "Please select size and color and press Add to order " %}</div>
    <div>
        <ul class="product-size-list">
            {% for item in product.items.all %}
            <li>
                <input name="size" type="radio" id="sizeid-{{ item.size }}" value="{{ item.size }}"/>
                <div id="alt-sizeid-{{ item.size }}">
                    <strong>{{ item.size }}</strong>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</section>
{% endblock %}